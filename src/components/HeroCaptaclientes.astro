---
// HeroCaptaclientes.astro - Hero específico para Sistema Captaclientes Ágil
const title = "Sistema que capta clientes en 48 h (versión operativa)";
const subtitle = "Landing + Bot WhatsApp + Automatización. Demo sin pago adelantado.";
const ctaPrimary = "Agendar demo por Zoom hoy";
const ctaSecondary = "Hablar por WhatsApp";
const calendlyUrl = "https://calendly.com/TU_USUARIO/30min";
const whatsappUrl = "https://wa.me/580000000000?text=Hola%20vengo%20del%20anuncio%20quiero%20la%20demo";
---

<section class="relative isolate text-white bg-[linear-gradient(180deg,#0d0712,40%,#2b0f2f)]" id="oferta">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pt-12 md:pt-20 pb-12 md:pb-16">
    <div class="grid grid-cols-1 md:grid-cols-2 items-center gap-6 md:gap-12 min-h-[85vh] md:min-h-[70vh]">
      
      <!-- Texto -->
      <div class="order-2 md:order-1">
        <h1 class="font-bold leading-tight text-balance [font-size:clamp(28px,6vw,52px)] animate-[slideInLeft_0.6s_ease-out_forwards]">
          <span>Sistema que capta</span>
          <span class="bg-gradient-to-r from-[#C0176C] via-[#D2137D] to-[#FF8A00] bg-clip-text text-transparent"> clientes</span>
          <span class="block">en 48 h (versión operativa)</span>
        </h1>
        <p class="mt-4 text-neutral-200/90 [font-size:clamp(14px,2.6vw,18px)] animate-[slideInLeft_0.6s_ease-out_0.1s_backwards]">
          {subtitle}
        </p>
        
        <!-- Badges -->
        <div class="mt-6 flex flex-wrap items-center gap-3 animate-[slideInLeft_0.6s_ease-out_0.2s_backwards]">
          <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-500/20 text-green-300 border border-green-500/30">
            Entrega versión operativa en 48h
          </span>
          <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-500/20 text-orange-300 border border-orange-500/30">
            Sin pago adelantado
          </span>
          <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-500/20 text-red-300 border border-red-500/30">
            Cupos limitados
          </span>
        </div>

        <!-- CTAs -->
        <div class="mt-6 md:mt-8 flex flex-col sm:flex-row gap-3 md:gap-4 animate-[slideInLeft_0.6s_ease-out_0.3s_backwards]">
          <a 
            href={calendlyUrl}
            target="_blank"
            rel="noopener noreferrer"
            data-analytics="cta-zoom"
            class="inline-flex items-center justify-center rounded-xl px-4 md:px-6 py-3 md:py-4 font-semibold text-white
                   shadow-lg bg-gradient-to-r from-[#C0176C] via-[#D2137D] to-[#FF8A00]
                   hover:opacity-95 active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-[#FF8A00]/60
                   animate-[bounceIn_0.7s_ease-out_forwards] text-base md:text-lg"
            aria-label={ctaPrimary}
          >
            <svg class="mr-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
            {ctaPrimary}
          </a>
          <a 
            href={whatsappUrl}
            target="_blank"
            rel="noopener noreferrer"
            data-analytics="cta-whatsapp"
            class="inline-flex items-center justify-center rounded-xl px-4 md:px-6 py-3 md:py-4 font-semibold text-white
                   bg-green-600 hover:bg-green-700 active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-green-500/60
                   transition-all duration-300 text-base md:text-lg"
            aria-label={ctaSecondary}
          >
            <svg class="mr-2 w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
            </svg>
            {ctaSecondary}
          </a>
        </div>
      </div>

      <!-- Mockups -->
      <div class="order-1 md:order-2 relative flex justify-center items-end min-h-[450px] md:min-h-[550px]">
        <!-- Laptop Mockup -->
        <div class="relative z-10 animate-[slideInRight_0.6s_ease-out_forwards] mb-8">
          <img 
            src="/images/mockups/laptop.png" 
            alt="Mockup de laptop mostrando sistema captaclientes" 
            class="w-full h-auto rounded-xl max-w-[500px] md:max-w-[600px] lg:max-w-[700px]"
            width="700"
            height="467"
            loading="eager"
            decoding="async"
          />
          <!-- Sello Implementación Ágil -->
          <div class="absolute -top-4 -right-4 bg-gradient-to-r from-[#C0176C] to-[#FF8A00] text-white px-4 py-2 rounded-lg font-bold text-sm shadow-lg animate-pulse">
            Implementación ágil
          </div>
        </div>
        
        <!-- Mobile Mockup -->
        <div class="mobile-mockup absolute top-1/2 -translate-y-1/2 -right-2 md:-right-4 z-20 w-36 md:w-44 lg:w-52 slide-in-right">
          <img 
            src="/images/mockups/mobile.png" 
            alt="Mockup de móvil mostrando bot WhatsApp" 
            class="w-full h-auto rounded-xl"
            width="200"
            height="400"
            loading="eager"
            decoding="async"
          />
        </div>
      </div>
    </div>
  </div>
  <div aria-hidden="true"
       class="pointer-events-none absolute inset-x-0 -z-10 top-0 h-[38dvh]
              bg-gradient-to-b from-[#C0176C33] via-transparent to-transparent blur-3xl"></div>
</section>

<script>
  // Intersection Observer para animaciones
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry, index) => {
      if (entry.isIntersecting) {
        // Delay escalonado para los mockups
        if (entry.target.classList.contains('mobile-mockup')) {
          setTimeout(() => {
            entry.target.classList.add('visible');
          }, 400);
        } else {
          setTimeout(() => {
            entry.target.classList.add('visible');
          }, index * 200);
        }
      }
    });
  }, observerOptions);

  // Observar elementos con animaciones
  document.querySelectorAll('.slide-in-left, .slide-in-right, .bounce-in, .mobile-mockup').forEach(el => {
    observer.observe(el);
  });

  // Asegurar que los mockups se muestren inmediatamente si ya están en viewport
  setTimeout(() => {
    document.querySelectorAll('.mobile-mockup').forEach(el => {
      if (el.getBoundingClientRect().top < window.innerHeight) {
        setTimeout(() => el.classList.add('visible'), 400);
      }
    });
  }, 100);

  // Analytics tracking optimizado
  document.addEventListener('click', function(e) {
    const analyticsEl = e.target.closest('[data-analytics]');
    if (analyticsEl) {
      const action = analyticsEl.getAttribute('data-analytics');
      if (typeof gtag !== 'undefined') {
        gtag('event', 'click', {
          event_category: 'CTA',
          event_label: action
        });
      }
      
      // Meta Pixel CTA tracking
      if (typeof window !== 'undefined' && (window as any).fbq) {
        (window as any).fbq('trackCustom','CTA_Click', { place: action });
      }
    }
  });
</script>

<style is:global>
  @keyframes slideInLeft { 
    from {opacity:0; transform:translateX(-30px)} 
    to {opacity:1; transform:translateX(0)} 
  }
  @keyframes slideInRight{ 
    from {opacity:0; transform:translateX(30px)}  
    to {opacity:1; transform:translateX(0)} 
  }
  @keyframes bounceIn   { 
    0%{opacity:0; transform:scale(1.2)} 
    60%{opacity:1; transform:scale(.95)} 
    100%{opacity:1; transform:scale(1)} 
  }

  /* Clases de animación */
  .slide-in-left {
    opacity: 0;
    transform: translateX(-30px);
    transition: all 600ms ease-out;
  }

  .slide-in-right {
    opacity: 0;
    transform: translateX(30px);
    transition: all 600ms ease-out;
  }

  .bounce-in {
    opacity: 0;
    transform: scale(1.2);
    transition: all 700ms ease-out;
  }

  .slide-in-left.visible,
  .slide-in-right.visible,
  .bounce-in.visible {
    opacity: 1 !important;
    transform: translateX(0) !important;
  }

  .bounce-in.visible {
    transform: scale(1) !important;
  }

  /* Responsive adjustments para mockup mobile */
  @media (max-width: 768px) {
    .mobile-mockup {
      position: absolute !important;
      top: 50% !important;
      transform: translateY(-50%) !important;
      right: -0.5rem !important;
      width: 7rem !important; /* w-28 */
    }
  }

  @media (max-width: 640px) {
    .mobile-mockup {
      width: 6rem !important; /* w-24 */
      right: -0.25rem !important;
    }
  }

  @media (max-width: 480px) {
    .mobile-mockup {
      width: 5rem !important; /* w-20 */
      right: -0.125rem !important;
    }
  }
</style>

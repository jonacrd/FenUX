---
// Header.astro - Barra superior minimal con logo y navegación
export interface Props {
  currentPage?: string;
  showHomeLink?: boolean;
}

const { currentPage = 'home', showHomeLink = true } = Astro.props;

// Configuración de navegación según la página
const getNavigationConfig = (page: string) => {
  const baseConfig = {
    home: {
      links: [
        { href: "#oferta", label: "Oferta" },
        { href: "#servicios", label: "Servicios" },
        { href: "#precios", label: "Precios" },
        { href: "#preguntas", label: "Preguntas" },
        { href: "#contacto", label: "Contacto" }
      ]
    },
    appsWeb: {
      links: [
        { href: "#modulos", label: "Módulos" },
        { href: "#precios", label: "Precios" },
        { href: "#testimonios", label: "Testimonios" },
        { href: "#faq", label: "FAQ" },
        { href: "#contacto", label: "Contacto" }
      ]
    },
    landingPortfolios: {
      links: [
        { href: "#incluye", label: "Qué incluye" },
        { href: "#funciona", label: "Cómo funciona" },
        { href: "#precios", label: "Precios" },
        { href: "#testimonios", label: "Testimonios" },
        { href: "#contacto", label: "Contacto" }
      ]
    },
    demo: {
      links: [
        { href: "#incluye", label: "Qué incluye" },
        { href: "#funciona", label: "Cómo funciona" },
        { href: "#precios", label: "Precios" },
        { href: "#testimonios", label: "Testimonios" },
        { href: "#contacto", label: "Contacto" }
      ]
    }
  };
  
  return baseConfig[page] || baseConfig.home;
};

const navConfig = getNavigationConfig(currentPage);
---

<header class="fixed top-0 left-0 right-0 z-50 bg-brand-dark/95 backdrop-blur-sm border-b border-brand-magenta/20">
  <div class="container mx-auto px-4 py-4">
    <div class="flex items-center justify-between">
      <!-- Logo FENUX -->
      <a href={showHomeLink ? "/" : "#"} class="hover:opacity-80 transition-opacity duration-300" aria-label="Ir a la página principal de FENUX">
        <img 
          src="/icons/fenix.png" 
          alt="Logo FENUX, fénix pixelado" 
          class="w-24 h-19 object-contain"
          width="40"
          height="68"
        />
      </a>

      <!-- Navegación Desktop -->
      <nav class="hidden md:flex items-center space-x-8" role="navigation" aria-label="Navegación principal">
        {navConfig.links.map((link) => (
          <a 
            href={link.href} 
            class="text-white/80 hover:text-white transition-colors duration-300 font-inter font-medium"
            aria-label={`Ver ${link.label.toLowerCase()}`}
          >
            {link.label}
          </a>
        ))}
      </nav>


      <!-- Botón Mobile Menu -->
      <button 
        class="md:hidden text-white p-2"
        aria-label="Abrir menú de navegación"
        id="mobile-menu-button"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>

    <!-- Menú Mobile -->
    <div 
      class="md:hidden mt-4 pb-4 border-t border-brand-magenta/20 pt-4 hidden" 
      id="mobile-menu"
      role="navigation"
      aria-label="Navegación móvil"
    >
      <div class="flex flex-col space-y-4">
        {navConfig.links.map((link) => (
          <a 
            href={link.href} 
            class="text-white/80 hover:text-white transition-colors duration-300 font-inter font-medium py-2"
            aria-label={`Ver ${link.label.toLowerCase()}`}
          >
            {link.label}
          </a>
        ))}
      </div>
    </div>
  </div>
</header>

<script>
  // Toggle mobile menu
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  
  if (mobileMenuButton && mobileMenu) {
    mobileMenuButton.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      
      // Update aria-expanded
      const isExpanded = !mobileMenu.classList.contains('hidden');
      mobileMenuButton.setAttribute('aria-expanded', isExpanded);
    });
  }

  // Smooth scroll for navigation links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });

  // Analytics tracking
  document.querySelectorAll('[data-analytics]').forEach(element => {
    element.addEventListener('click', function() {
      const action = this.getAttribute('data-analytics');
      if (typeof gtag !== 'undefined') {
        gtag('event', 'click', {
          event_category: 'CTA',
          event_label: action
        });
      }
    });
  });
</script>

<style>
  .btn-primary {
    @apply inline-flex items-center justify-center px-6 py-3 rounded-xl font-inter font-semibold text-white bg-gradient-to-r from-brand-magenta via-brand-fuchsia to-brand-orange transition-all duration-300 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-brand-orange focus:ring-offset-2 focus:ring-offset-brand-dark;
  }
</style>
